<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>粮食危机离我们有多远</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="./stylesheets/swiper.min.css">
    <link rel="stylesheet" href="./stylesheets/pure.min.css">
    <link rel="stylesheet" href="./stylesheets/animate.css">

    <script src="./js/v.js" charset="UTF-8"></script>

    <link id="global-temp-annual" rel="variance-data" href="./data/global_temp1.csv">
    <link id="global-temp-fiveyear" rel="variance-data" href="./data/global_temp2.csv">
    <link id="global-temp-monthly" rel="variance-data" href="./data/global_temp3.csv">
    <link rel="stylesheet" href="./stylesheets/vcss1.css">

    <link rel="stylesheet" href="./stylesheets/custom.css">

</head>
<body onload = "star()">
<div class="loading">
    <div id="load">
        <div>G</div>
        <div>N</div>
        <div>I</div>
        <div>D</div>
        <div>A</div>
        <div>O</div>
        <div>L</div>
    </div>
</div>
<div class="cover">
    <img src="./assets/cover.jpg">
</div>
<div class="container">
    <div class="leftMenu">
        <div class="leftBtn"  >
            <img  id="firstBtn"  src="./assets/btn/btn1.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn2.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn3.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn4.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn5.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn6.png">
        </div>
        <div class="leftBtn">
            <img   src="./assets/btn/btn7.png">
        </div>
    </div>

        <div class="swiper-container">
            <div class="swiper-wrapper" id="canvasBox">
                <div class="swiper-slide" id="slide1">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re" id="canvas1">

                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text1">
                                <img class="fwi" src="./assets/title/t1.png">
                                <ul class="texts">
                                    <li  class="li1">嗨，朋友</li>
                                    <li  class="li1">不管你今天过得好不好</li>
                                    <li  class="li1">至少要好过世界上25000个人</li>
                                    <li  class="li1">——他们在今天在饥饿中死去</li>
                                    <li class="li1"></li>
                                    <li  class="li1">8.95亿</li>
                                    <li  class="li1">是世界上营养不良的人数</li>
                                    <li  class="li1">饿</li>
                                    <li  class="li2">对他们来说是无助的</li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="swiper-slide" id="slide2">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re " id="canvas2">
                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text2">
                                <img class="fwi" src="./assets/title/t2.png">
                                <ul class="texts">
                                    <li  class="li1">很难形容这张网有多重要</li>
                                    <li  class="li1">大米和小麦</li>
                                    <li  class="li1">沿着这张网在国际间贸易</li>
                                    <li  class="li1"></li>

                                    <li  class="li1">她有11427条连线</li>
                                    <li class="li1">她供养着世界上70多亿人口</li>
                                    <li  class="li1">她繁忙不已</li>
                                    <li  class="li2">人类得以生生不息</li>

                                </ul>
                                <div class="bottomBtn" id="showEarth">显示地球</div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="swiper-slide" id="slide3">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re " id="canvas3">
                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text3">
                                <img class="fwi" src="./assets/title/t3.png">
                                <ul class="texts">
                                    <li  class="li1">这是中国与世界的粮食贸易关系</li>
                                    <li  class="li1">蓝色代表进口</li>
                                    <li  class="li1">红色代表出口</li>
                                    <li  class="li1"></li>
                                    <li  class="li2">中国是世界上第五大农产品出口国</li>
                                    <li  class="li1">也是第四大农产品进口国</li>
                                    <li  class="li1">吞吐之间</li>
                                    <li  class="li1">是国家为粮食安全的努力</li>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide" id="slide4">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re " id="canvas4">
                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text4">
                                <img class="fwi" src="./assets/title/t4.png">
                                <ul class="texts">
                                    <li  class="li1">这是从92年到12年</li>
                                    <li  class="li1">中国的农牧产品进口量</li>
                                    <li  class="li1">增加不够明显？</li>
                                    <li  class="li1"></li>
                                    <li  class="li1">那么</li>
                                    <li  class="li1">点击下面的按钮试试吧</li>
                                </ul>
                                <div class="bottomBtn">显示全部</div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="swiper-slide" id="slide5">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re " id="canvas5">
                            <div id="global_temp">

                                <chart class="global-temp" data="#global-temp-annual" map-xy="year annual_mean" scale-x-linear="1878 2020" scale-y-linear="-0.8 1.0"><guide-x ticks="1880 1900 1920 1940 1960 1980 2000 2010"></guide-x><guide-y class="right" ticks="-0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8"><span class="label"> {{value}} °C</span>
                                </guide-y><points class="monthly" data="#global-temp-monthly" map-xy="year jan"></points><points class="monthly" data="#global-temp-monthly" map-xy="year feb"></points><points class="monthly" data="#global-temp-monthly" map-xy="year mar"></points><points class="monthly" data="#global-temp-monthly" map-xy="year apr"></points><points class="monthly" data="#global-temp-monthly" map-xy="year may"></points><points class="monthly" data="#global-temp-monthly" map-xy="year jun"></points><points class="monthly" data="#global-temp-monthly" map-xy="year jul"></points><points class="monthly" data="#global-temp-monthly" map-xy="year aug"></points><points class="monthly" data="#global-temp-monthly" map-xy="year sep"></points><points class="monthly" data="#global-temp-monthly" map-xy="year oct"></points><points class="monthly" data="#global-temp-monthly" map-xy="year nov"></points><points class="monthly" data="#global-temp-monthly" map-xy="year dec"></points><line class="annual-mean"></line><line class="five-year-mean" data="#global-temp-fiveyear" map-xy="year five_year_mean"></line><repeat class="annual-means"><point class="annual-mean"></point></repeat><div class="title">
                                    <h4>全球气温走势</h4>
                                </div>
                                </chart><div class="legend-wrapper">
                                <div class="legend">
                                    <ul>
                                        <li class="monthly">
                                            <span class="icon"></span>
                                            <span class="description">月度均值</span>
                                        </li>
                                        <li class="annual">
                                            <span class="icon"></span>
                                            <span class="description">年度均值</span>
                                        </li>
                                        <li class="fiveyear">
                                            <span class="icon"></span>
                                            <span class="description">五年均值</span>
                                        </li>
                                    </ul>
                                </div>

                            </div>

                            </div>

                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text5">
                                <img class="fwi" src="./assets/title/hot.png">
                                <ul class="texts">
                                    <li  class="li1">在过去的百年里</li>

                                    <li  class="li1">科技有了划时代的进步</li>
                                    <li  class="li1">但农业仍然无法摆脱对气候的依赖</li>
                                    <li  class="li1"></li>

                                    <li  class="li1">在过去的百年里</li>
                                    <li  class="li2">气候改变紧随科技迭代的步伐</li>
                                    <li  class="li1">对地球来说</li>
                                    <li  class="li1">1°也意味着一场巨变</li>

                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="swiper-slide swiper-no-swiping " id="slide6">
                    <div class="pure-g fh ">
                        <div class="pure-u-2-3 re " id="canvas6">
                        </div>
                        <div class="pure-u-1-3 re">
                            <div class="rightBox" id="text6">
                                <img class="fwi" src="./assets/title/down.png">
                                <ul class="texts">
                                    <li  class="li1">在最近的20年里</li>
                                    <li  class="li1">耕地面积变化不温不火</li>
                                    <li  class="li1">人口稳步上升</li>
                                    <li  class="li1">人均耕地面积明显减少</li>
                                    <li  class="li2">在未来的20年到50年里</li>
                                    <li  class="li1">人类对粮食的需求有增无减</li>
                                </ul>
                                <div class=" pure-g ">
                                    <div class="pure-u-1-3">
                                        <div class="bottomBtn  threeBtn" id="land">
                                            耕地
                                        </div>
                                    </div>
                                    <div class="pure-u-1-3">
                                        <div class="bottomBtn threeBtn" id="pop">
                                            人口
                                        </div>
                                    </div>
                                    <div class="pure-u-1-3">
                                        <div class="bottomBtn threeBtn" id="ave">
                                            人均
                                        </div>
                                    </div>
                                </div>
                                <div class=" pure-g zoomc ">
                                    <div class="pure-u-1-2">
                                        <div class="bottomBtn   " id="zoomIn">
                                            缩小
                                        </div>
                                    </div>
                                    <div class="pure-u-1-2">
                                        <div class="bottomBtn " id="zoomOut">
                                            放大
                                        </div>
                                    </div>

                                </div>


                            </div>


                        </div>
                    </div>
                </div>
                <div class="swiper-slide" id="slide7">
                    <div class="pure-g" id="endpage">
                        <div class="pure-u-1-2" id = 'endu' >
                            <div class="rightBox" id="text7">
                                <img class="endImg" src="./assets/title/future.png">
                                <ul class="texts">
                                    <li  class="li1">到2050年</li>
                                    <li  class="li1">全球人口数将会达到90亿</li>
                                    <li  class="li1">粮食需要增产60%才能满足人类需求</li>
                                    <li  class="li1">然而气候在恶化</li>
                                    <li  class="li2">耕地易减难增</li>
                                    <li  class="li2">城市化如火如荼</li>
                                    <li  class="li1">转基因进退维谷</li>
                                    <li  class="li2">粮食安全，刻不容缓</li>
                                </ul>
                            </div>
                        </div>
                        <div class="pure-u-1-2">
                            <div class="rightBox" id="text8">
                                <img class="endImg" src="./assets/title/data.png">
                                <ul class="texts">
                                    <li  class="li1">营养不良患病率：FAO(http://faostat3.fao.org/home/E)</li>
                                    <li  class="li1">农产品贸易关系数据：FAO(http://faostat3.fao.org/home/E)</li>
                                    <li  class="li1">中国农牧产品进口数据：中国国家统计局(http://www.stats.gov.cn/)</li>
                                    <li  class="li2">世界各国耕地、人口：FAO(http://faostat3.fao.org/home/E)</li>
                                    <li  class="li2">人口、粮食预测：FAO(http://faostat3.fao.org/home/E)</li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

</div>


<script type="x-shader/x-vertex" id="vertexshader">
        attribute float size;
attribute vec3 customColor;

varying vec3 vColor;

void main() {
    vColor = customColor;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_PointSize = size * ( 300.0 / length( mvPosition.xyz ) );
    gl_Position = projectionMatrix * mvPosition;
}
</script>
<script type="x-shader/x-fragment" id="fragmentshader">
            uniform vec3 color;
            uniform sampler2D texture;

            varying vec3 vColor;

            void main() {
                gl_FragColor = vec4( color * vColor, 0.5 );
                gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );
            }
        </script>
<script src="./js/jquery.min.js"></script>
<script src="./js/typetype.js"></script>
<script src="./js/swiper.jquery.min.js"></script>
<script src="./js/jquery.fittext.js"></script>
<script src="./js/jquery.lettering.js"></script>
<script src="./js/jquery.textillate.js"></script>
<script src="./js/p5.js"></script>
<script src="./js/p5.dom.js"></script>

<script type="text/javascript" src="./js/three.js"></script>
<script type="text/javascript" src="./js/./detect.js"></script>
<script type="text/javascript" src="./js/stats.js"></script>
<script type="text/javascript" src="./js/trackball.js"></script>
<script type="text/javascript" src="./js/dat.js"></script>
<script type="text/javascript" src="./data/datademo.js"></script>
<script type="text/javascript" src="./data/chinaTrade.js"></script>
<script type="text/javascript" src="./data/data2.js"></script>
<script type="text/javascript" src="./data/data3.js"></script>

<script type="text/javascript" src="./data/listArr.js"></script>
<script src="./js/main.js"></script>


<script>
    $(function(){
        $('input').addClass('swiper-no-swiping');

        var doAnima = function(i){
            if(i == 0){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
            if(i == 1){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
            if(i == 2){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
            if(i == 3){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
            if(i == 4){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    $('line.five-year-mean svg path').css({'-moz-animation-name':'drawstroke','-webkit-animation-name':'drawstroke','animation-name':'drawstroke'});
                    $('line.annual-mean svg path').css({'-moz-animation-name':'drawstroke','-webkit-animation-name':'drawstroke','animation-name':'drawstroke'});
                    firstVisit[i] = false;

                }else{
                    playControl[i] = true;
                }
            }
            if(i == 5){
                if(firstVisit[i]){
                    typeAnima[0](i);
                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
            if(i == 6){
                if(firstVisit[i]){
                    //typeAnima[0](6);
                    //typeAnima[0](7);

                    playControl[i] = true;
                }else{
                    playControl[i] = true;
                }
            }
        }
        var clearAnima = function(i){
            playControl[i] = false;
        }

        var swiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            noSwiping : true,
            preventClicks : false,
            onlyExternal : true,
            onSlideChangeStart: function(swiper){
                doAnima(swiper.activeIndex);
                clearAnima(swiper.previousIndex);
                firstVisit[swiper.activeIndex] = false;
            },
            onInit: function(swiper){
                anima[0]();
                anima[5]();

                anima[3]();
                anima[2]();
                anima[1]();


                playControl[0] = false;
                playControl[2] = false;
                playControl[1] = false;
                playControl[3] = false;

            }
        });
        $('.leftBtn').click(function(){
            $('.activeBtn').removeClass('activeBtn');
            $(this).find('img').addClass('activeBtn');
            swiper.slideTo($(this).index())
        })
    })
</script>
<script type="text/javascript">
    var star = function(){
        console.log('beging');
        $('.loading').addClass('hide');
        $('.cover').click(function(){
            $(this).hide();
            playControl[0] = true;
            firstVisit[0] = false;
            $('#firstBtn').addClass('activeBtn');
            typeAnima[0](0);
        })
    }
    //document.addEventListener("DOMContentLoaded", star, false);
</script>
</body>
</html>